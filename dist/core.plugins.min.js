/*! core 2014-07-15 */
!function(){function a(a){a&&a.__inheriting__||b.call(this,a)}var b=core.events.EventDispatcher,c=b.prototype;a.inherits(b);var d=a.prototype;d.construct=function(a){c.construct.call(this,a),this.initialize()},d.dispose=function(){c.dispose.call(this)},d.dispatchScroll=function(){var a=this.scrollLeft=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,b=this.scrollTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this.trigger("window.scroll",{scrollTop:b,scrollLeft:a}),this.tick=!1},d.dispatchResize=function(){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c="mobile";a>=992&&1200>a?c="medium":992>a&&a>=768?c="small":a>=1200&&(c="large"),this.trigger("window.resize",{width:a,height:b,type:c}),this.tickResize=!1},d.dispatchMotion=function(){var a=this.motionEvent,b=a.accelerationIncludingGravity.x,c=a.accelerationIncludingGravity.y,d=a.accelerationIncludingGravity.z,e=a.rotationRate.alpha,f=a.rotationRate.gamma,g=a.rotationRate.beta;this.trigger("window.device.motion",{accelX:b,accelY:c,accelZ:d,rotationAlpha:e,rotationBeta:g,rotationGamma:f}),this.tickMotion=!1,this.motionEvent=null},d.onWindowScroll=function(){this.tick||(this.tick=!0,requestAnimationFrame(this._("dispatchScroll")))},d.onWindowResize=function(){this.tickResize||(this.tickResize=!0,requestAnimationFrame(this._("dispatchResize")))},d.onDeviceMotion=function(a){this.motionEvent=a,this.tickMotion||(this.tickMotion=!0,requestAnimationFrame(this._("dispatchMotion")))},d.initialize=function(){this.scrollTop=0,this.scrollLeft=0,window.addEventListener("scroll",this._("onWindowScroll")),window.addEventListener("resize",this._("onWindowResize")),core.browser.touch&&window.addEventListener("devicemotion",this._("onDeviceMotion"))};var e,f={init:function(b){return null==e&&(e=new a(b)),e}};f.instance=f.init,core.registerNamespace("core.addons.CoreWindow",f)}(),function(){function a(a){a&&a.__inheriting__||b.call(this,a)}var b=core.events.EventDispatcher,c=b.prototype;a.inherits(b);var d=a.prototype;d.construct=function(a){c.construct.call(this,a),this.initialize()},d.dispose=function(){c.dispose.call(this)},d.initialize=function(){return"undefined"==typeof navigator.geolocation?console.warn("Geolocation not available."):void navigator.geolocation.getCurrentPosition(this._("onLocationRetrieved"),this._("onErrorLocation"))},d.onLocationRetrieved=function(a){this.current=a.coords,this.trigger("ready",{target:this,coords:a.coords})},d.onErrorLocation=function(a){this.trigger("error",{target:this,message:a})};var e=function(a,b){var c=b.latitude,d=b.longitude,e=a.latitude,f=a.longitude,g=6372.795477598,h=c-e,i=h*Math.PI/180,j=d-f,k=j*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(k/2)*Math.sin(k/2),m=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return g*m};d.getDistanceFromCurrentLocation=function(a){return e(this.current,a)},d.getDistanceFromLocations=function(a,b){return e(a,b)},d.update=function(){navigator.geolocation.getCurrentPosition(this._("onLocationRetrieved"),this._("onErrorLocation"))};var f,g={init:function(b){return null==f&&(f=new a(b)),f}};g.instance=g.init,core.registerNamespace("core.addons.location.CoreLocation",g)}(),function(){function a(a){a&&a.__inheriting__||b.call(this,a)}var b=core.Core,c=b.prototype;a.inherits(b),core.dependency("TweenMax","StoryBoard class requires TweenMax. Please ensure that this is included in your assets."),core.dependency("jQuery","StoryBoard class requires jQuery. Please ensure that this is included in your assets."),$=jQuery;var d=a.prototype;d.construct=function(a){c.construct.call(this,a),this.supportTouch=a.supportTouch||!1,this.initialize(a)},d.dispose=function(){c.dispose.call(this)},d.update=function(){if(this.timeline){var a=core.rect(this.heightOffset[0]),b=Math.abs(a.top)/(a.height-$(window).height());this.timeline.seek(b*this.timeline.duration())}},d.resizeElements=function(){var a=$(window).width(),b=$(window).height();this.elements.css({width:a,height:b,position:"fixed",top:0,left:0}),this.checkOffset(b),this.update()},d.checkOffset=function(a){a*=this.timeScale,this.heightOffset||(this.heightOffset=$("<div></div>"),$("body").append(this.heightOffset)),this.heightOffset.css({width:1,height:a*this.elements.length,position:"absolute",top:0,left:0})},d.initialize=function(a){this.timeScale=a&&a.timeScale?a.timeScale:1,this.elements=$("[core-story]"),core.addons.CoreWindow.instance().on("window.scroll",this._("update"),this),core.addons.CoreWindow.instance().on("window.resize",this._("resizeElements"),this),this.resizeElements(),this.timeline=new TimelineMax,this.configureStory(),this.update()},d.configureStory=function(){for(var a=-1,b=this.elements.length;a++<b;){{var c=$(this.elements[a]),d=c.attr("core-story-animation");c.attr("core-story")}if(d){var e=new Function("return "+d)();if(e.speed){var f=e.speed;delete e.speed}this.timeline.add(TweenMax.from(c,f||1,e))}for(var g=c.find("[core-element-animation]"),h=-1,i=g.length;h++<i;){var d=$(g[h]).attr("core-element-animation");if(d){var e=new Function("return "+d)();if(e.speed){var f=e.speed;delete e.speed}this.timeline.add(TweenMax.from(g[h],f||1,e))}}}this.timeline.pause()},core.registerNamespace("core.addons.storyboard.StoryBoard",a)}(),function(){function a(a){a&&a.__inheriting__||b.call(this,a)}var b=core.Core,c=b.prototype;a.inherits(b);var d=a.prototype;d.construct=function(a){c.construct.call(this,a),this.supportTouch=a.supportTouch||!1,this.initialize()},d.dispose=function(){c.dispose.call(this)},d.update=function(){for(var a=this.elements.length;a--;){var b=Number(this.elements[a].getAttribute("scroll-offset"))||.1,c=Number(this.elements[a].getAttribute("scroll-invert"))||0,d=core.rect(this.elements[a]).top,e=d*b;c&&(e*=-1),this.elements[a].style.backgroundPosition="center "+e+"px"}this.tick=!1},d.updateAcceleration=function(){},d.initialize=function(){this.elements=this.findAll("[core-parallax]"),core.addons.CoreWindow.instance().on("window.scroll",this._("update"),this),core.addons.CoreWindow.instance().on("window.device.motion",this._("updateAcceleration"),this),this.tick=!0,this.update()};var e,f={init:function(b){return null==e&&(e=new a(b)),e}};f.instance=f.init,core.registerNamespace("core.addons.uiscroll.CoreParallax",f)}(),function(){function a(a){a&&a.__inheriting__||c.call(this,a)}function b(a,b){if(a&&b){var c=a.className,d=c.indexOf(b);-1==d?c+=" "+b:c=c.substr(0,d)+c.substr(d+b.length),a.className=c}}var c=core.Core,d=c.prototype;a.inherits(c);var e=a.prototype;e.construct=function(a){d.construct.call(this,a),this.supportTouch=a.supportTouch||!1,this.initialize()},e.dispose=function(){d.dispose.call(this)},e.update=function(a){for(var c=this.elements.length;c--;){var d=core.rect(this.elements[c]).top,e=Number(this.elements[c].getAttribute("core-snap-offset"))||0;this.elements[c].origTop||(this.elements[c].origTop=d);var f=this.elements[c].getAttribute("core-snap-style");a.scrollTop+e>=this.elements[c].origTop?(this.elements[c].style.position="fixed",this.elements[c].style.top=e+"px",f&&-1==this.elements[c].className.indexOf(f)&&(b(this.elements[c],this.elements[c].getAttribute("core-snap-style")),this.elements[c].snapped=!0)):(this.elements[c].style.position="relative",f&&-1!=this.elements[c].className.indexOf(f)&&(b(this.elements[c],this.elements[c].getAttribute("core-snap-style")),this.elements[c].style.top="",this.elements[c].snapped=!1))}},e.initialize=function(){this.elements=this.findAll("[core-snap]"),core.addons.CoreWindow.instance().on("window.scroll",this._("update"),this)};var f,g={init:function(b){return null==f&&(f=new a(b)),f}};g.instance=g.init,core.registerNamespace("core.addons.uiscroll.CoreSnap",g)}(),function(){function a(a){a&&a.__inheriting__||c.constructor.call(this,a)}var b=core.Core,c=b.prototype;a.inherits(b);var d=a.prototype;d.dispose=function(){c.dispose.call(this)},d.construct=function(a){c.construct.call(this,a),this.hasLocalStorage="localStorage"in window,this.hasSessionStorage="sessionStorage"in window,this.hasSQL="openDatabase"in window},d.storeLocal=function(a,b){this.hasLocalStorage&&(localStorage[a]=JSON.stringify(b))},d.retrieveLocal=function(a){return this.hasLocalStorage&&localStorage[a]?JSON.parse(localStorage[a]):null},d.storeSession=function(a,b){this.hasSessionStorage&&(sessionStorage[a]=b)},d.retrieveSession=function(a){return this.hasSessionStorage?sessionStorage[a]:void 0},d.createTable=function(a,b){this.hasSQL&&"undefined"!=typeof this.sqlDB&&this.sqlDB.transaction(function(c){c.executeSql("CREATE TABLE IF NOT EXISTS "+a+"("+b+")")}.bind(this))},d.updateSql=d.insertSql=function(a){this.sqlDB.transaction(function(b){b.executeSql(a)})},d.retrieveSql=function(a,b){this.sqlDB.transaction(function(c){c.executeSql(a,[],b)})},d.configureSQL=function(a,b,c,d){this.hasSQL&&(this.sqlDB=openDatabase(a,b,c,d))};var e=null,f={init:function(){return null==e&&(e=new a),e}};f.instance=f.init,core.registerNamespace("core.addons.webapp.LocalStorage",f)}(),function(){function a(a){a&&a.__inheriting__||c.constructor.call(this,a)}var b=core.wirings.Module,c=b.prototype;a.inherits(b);var d=a.prototype;d.dispose=function(){c.dispose.call(this),clearInterval(this.cacheStatusTimer)},d.construct=function(a){this.cacheUpdateInterval||(this.cacheUpdateInterval=3e3),c.construct.call(this,a),e.call(this)},d.initialized=function(){console.warn("OfflineModule subclass requires initialized method.")},d.onApplicationCacheStatus=function(a){switch(a.type){case"error":this.currentOnlineStatus!==!1&&(this.currentOnlineStatus=!1,this.onlineStatus(!1));break;case"cached":this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0)),this.cacheStatus("cached");break;case"checking":break;case"downloading":break;case"noupdate":this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0));break;case"obsolete":this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0)),this.cacheStatus("updateAvailable");break;case"progress":break;case"ready":this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0));break;default:this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0))}},d.cacheStatus=function(){},d.onlineStatus=function(){};var e=function(){if(this.currentOnlineStatus=-1,"applicationCache"in window){var a=window.applicationCache;a.addEventListener("error",this._("onApplicationCacheStatus")),a.addEventListener("cached",this._("onApplicationCacheStatus")),a.addEventListener("checking",this._("onApplicationCacheStatus")),a.addEventListener("downloading",this._("onApplicationCacheStatus")),a.addEventListener("noupdate",this._("onApplicationCacheStatus")),a.addEventListener("obsolete",this._("onApplicationCacheStatus")),a.addEventListener("progress",this._("onApplicationCacheStatus")),a.addEventListener("ready",this._("onApplicationCacheStatus"));var b=this;this.cacheStatusTimer=setInterval(function(){try{window.applicationCache.update()}catch(a){console.warn("Using application cache without a manifest. Cache update check and online status check will not work."),clearInterval(b.cacheStatusTimer)}},this.cacheUpdateInterval)}this.localStorage=core.addons.webapp.LocalStorage.init()};core.registerNamespace("core.wirings.OfflineModule",a)}(core.selector);