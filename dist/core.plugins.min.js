/*! core 2014-05-02 */
!function(){function a(a){a&&a.__inheriting__||b.call(this,a)}var b=core.events.EventDispatcher,c=b.prototype;a.inherits(b);var d=a.prototype;d.construct=function(a){c.construct.call(this,a),this.initialize()},d.dispose=function(){c.dispose.call(this)},d.dispatchScroll=function(){var a=this.scrollLeft=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,b=this.scrollTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this.trigger("window.scroll",{scrollTop:b,scrollLeft:a}),this.tick=!1},d.dispatchResize=function(){var a=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);this.trigger("window.resize",{width:a,height:a}),this.tickResize=!1},d.dispatchMotion=function(){var a=this.motionEvent,b=a.accelerationIncludingGravity.x,c=a.accelerationIncludingGravity.y,d=a.accelerationIncludingGravity.z,e=a.rotationRate.alpha,f=a.rotationRate.gamma,g=a.rotationRate.beta;this.trigger("window.device.motion",{accelX:b,accelY:c,accelZ:d,rotationAlpha:e,rotationBeta:g,rotationGamma:f}),this.tickMotion=!1,this.motionEvent=null},d.onWindowScroll=function(){this.tick||(this.tick=!0,requestAnimationFrame(this._("dispatchScroll")))},d.onWindowResize=function(){this.tickResize||(this.tickResize=!0,requestAnimationFrame(this._("dispatchResize")))},d.onDeviceMotion=function(a){this.motionEvent=a,this.tickMotion||(this.tickMotion=!0,requestAnimationFrame(this._("dispatchMotion")))},d.initialize=function(){this.scrollTop=0,this.scrollLeft=0,window.addEventListener("scroll",this._("onWindowScroll")),window.addEventListener("resize",this._("onWindowResize")),core.browser.touch&&window.addEventListener("devicemotion",this._("onDeviceMotion"))};var e,f={init:function(b){return null==e&&(e=new a(b)),e}};f.instance=f.init,core.registerNamespace("CoreWindow",f)}(),function(){function a(a){a&&a.__inheriting__||b.call(this,a)}var b=core.Core,c=b.prototype;a.inherits(b),core.dependency("TweenMax","StoryBoard class has TweenMax as dependency. Please ensure that this is included in your assets."),core.dependency("jQuery","StoryBoard class has jQuery as dependency. Please ensure that this is included in your assets.");var d=a.prototype;d.construct=function(a){c.construct.call(this,a),this.supportTouch=a.supportTouch||!1,this.initialize()},d.dispose=function(){c.dispose.call(this)},d.update=function(){},d.updateAcceleration=function(){},d.initialize=function(){this.elements=this.findAll("[core-story]"),CoreWindow.instance().on("window.scroll",this._("update"),this),CoreWindow.instance().on("window.device.motion",this._("updateAcceleration"),this),this.update()};var e,f={init:function(b){return null==e&&(e=new a(b)),e}};f.instance=f.init,core.registerNamespace("StoryBoard",f)}(),function(){function a(a){a&&a.__inheriting__||b.call(this,a)}var b=core.Core,c=b.prototype;a.inherits(b);var d=a.prototype;d.construct=function(a){c.construct.call(this,a),this.supportTouch=a.supportTouch||!1,this.initialize()},d.dispose=function(){c.dispose.call(this)},d.update=function(){for(var a=this.elements.length;a--;){var b=Number(this.elements[a].getAttribute("scroll-offset"))||.1,c=Number(this.elements[a].getAttribute("scroll-invert"))||0,d=core.rect(this.elements[a]).top,e=d*b;c&&(e*=-1),this.elements[a].style.backgroundPosition="center "+e+"px"}this.tick=!1},d.updateAcceleration=function(){},d.initialize=function(){this.elements=this.findAll("[core-parallax]"),CoreWindow.instance().on("window.scroll",this._("update"),this),CoreWindow.instance().on("window.device.motion",this._("updateAcceleration"),this),this.tick=!0,this.update()};var e,f={init:function(b){return null==e&&(e=new a(b)),e}};f.instance=f.init,core.registerNamespace("CoreParallax",f)}(),function(){function a(a){a&&a.__inheriting__||c.call(this,a)}function b(a,b){if(a&&b){var c=a.className,d=c.indexOf(b);-1==d?c+=" "+b:c=c.substr(0,d)+c.substr(d+b.length),a.className=c}}var c=core.Core,d=c.prototype;a.inherits(c);var e=a.prototype;e.construct=function(a){d.construct.call(this,a),this.supportTouch=a.supportTouch||!1,this.initialize()},e.dispose=function(){d.dispose.call(this)},e.update=function(a){for(var c=this.elements.length;c--;){var d=core.rect(this.elements[c]).top,e=Number(this.elements[c].getAttribute("core-snap-offset"))||0;this.elements[c].origTop||(this.elements[c].origTop=d);var f=this.elements[c].getAttribute("core-snap-style");a.scrollTop+e>=this.elements[c].origTop?(this.elements[c].style.position="fixed",this.elements[c].style.top=e+"px",f&&-1==this.elements[c].className.indexOf(f)&&(b(this.elements[c],this.elements[c].getAttribute("core-snap-style")),this.elements[c].snapped=!0)):(this.elements[c].style.position="relative",f&&-1!=this.elements[c].className.indexOf(f)&&(b(this.elements[c],this.elements[c].getAttribute("core-snap-style")),this.elements[c].style.top="",this.elements[c].snapped=!1))}},e.initialize=function(){this.elements=this.findAll("[core-snap]"),CoreWindow.instance().on("window.scroll",this._("update"),this)};var f,g={init:function(b){return null==f&&(f=new a(b)),f}};g.instance=g.init,core.registerNamespace("CoreSnap",g)}(),function(){function a(a){a&&a.__inheriting__||c.constructor.call(this,a)}var b=core.Core,c=b.prototype;a.inherits(b);var d=a.prototype;d.dispose=function(){c.dispose.call(this)},d.construct=function(a){c.construct.call(this,a),this.hasLocalStorage="localStorage"in window,this.hasSessionStorage="sessionStorage"in window,this.hasSQL="openDatabase"in window},d.storeLocal=function(a,b){this.hasLocalStorage&&(localStorage[a]=b)},d.retrieveLocal=function(a){return this.hasLocalStorage?localStorage[a]:null},d.storeSession=function(a,b){this.hasSessionStorage&&(sessionStorage[a]=b)},d.retrieveSession=function(a){return this.hasSessionStorage?sessionStorage[a]:void 0},d.createTable=function(a,b){this.hasSQL&&"undefined"!=typeof this.sqlDB&&this.sqlDB.transaction(function(c){c.executeSql("CREATE TABLE IF NOT EXISTS "+a+"("+b+")")}.bind(this))},d.updateSql=d.insertSql=function(a){this.sqlDB.transaction(function(b){b.executeSql(a)})},d.retrieveSql=function(a,b){this.sqlDB.transaction(function(c){c.executeSql(a,[],b)})},d.configureSQL=function(a,b,c,d){this.hasSQL&&(this.sqlDB=openDatabase(a,b,c,d))};var e=null,f={init:function(){return null==e&&(e=new a),e}};f.instance=f.init,core.registerNamespace("core.LocalStorage",f)}(),function(){function a(a){a&&a.__inheriting__||c.constructor.call(this,a)}var b=core.wirings.Module,c=b.prototype;a.inherits(b);var d=a.prototype;d.dispose=function(){c.dispose.call(this),clearInterval(this.cacheStatusTimer)},d.construct=function(a){c.construct.call(this,a),e.call(this)},d.initialized=function(){console.warn("OfflineModule subclass requires initialized method.")},d.onApplicationCacheStatus=function(a){switch(a.type){case"error":this.currentOnlineStatus!==!1&&(this.currentOnlineStatus=!1,this.onlineStatus(!1));break;case"cached":this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0)),this.cacheStatus("cached");break;case"checking":break;case"downloading":break;case"noupdate":this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0));break;case"obsolete":this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0)),this.cacheStatus("updateAvailable");break;case"progress":break;case"ready":this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0));break;default:this.currentOnlineStatus!==!0&&(this.currentOnlineStatus=!0,this.onlineStatus(!0))}},d.cacheStatus=function(){},d.onlineStatus=function(){};var e=function(){if(this.currentOnlineStatus=-1,"applicationCache"in window){var a=window.applicationCache;a.addEventListener("error",this._("onApplicationCacheStatus")),a.addEventListener("cached",this._("onApplicationCacheStatus")),a.addEventListener("checking",this._("onApplicationCacheStatus")),a.addEventListener("downloading",this._("onApplicationCacheStatus")),a.addEventListener("noupdate",this._("onApplicationCacheStatus")),a.addEventListener("obsolete",this._("onApplicationCacheStatus")),a.addEventListener("progress",this._("onApplicationCacheStatus")),a.addEventListener("ready",this._("onApplicationCacheStatus")),this.cacheStatusTimer=setInterval(function(){window.applicationCache.update()},3e3)}this.localStorage=core.LocalStorage.init()};core.registerNamespace("core.wirings.OfflineModule",a)}(core.selector);